(this.webpackJsonpfriends=this.webpackJsonpfriends||[]).push([[0],{31:function(e,t,a){e.exports=a(60)},36:function(e,t,a){},37:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(26),o=a.n(c),l=(a(36),a(37),a(4)),s=a(2),m=a(27),i=a.n(m);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={isAuthenticated:!1,error:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return p({},e,{isAuthenticated:!0});case"LOGIN_FAILURE":return{isAuthenticated:!1,error:t.payload};default:return e}},b=function(e){return{type:"LOGIN_FAILURE",payload:e}};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(e,t){switch(t.type){case"ADD_FRIEND":case"DELETE_FRIEND":case"EDIT_FRIEND":return h({},e,{friends:t.payload});case"SET_FRIEND":return h({},e,{current:t.payload});default:return e}},g=Object(r.createContext)(),v=Object(r.createContext)(),y=(Object(r.createContext)(),function(e){var t=Object(r.useReducer)(O,{friends:[],current:{name:"",age:"",email:""}});return n.a.createElement(g.Provider,{value:t},e.children)}),j=function(e){var t=P();return n.a.createElement(v.Provider,{value:t},e.children)},N=function(){var e=localStorage.getItem("token");return i.a.create({headers:{"Content-Type":"application/json",Authorization:"".concat(e)}})},w=function(){return Object(r.useContext)(v)},P=function(){var e=Object(r.useReducer)(f,d),t=Object(s.a)(e,2),a=t[0],n=t[1];return{authState:a,login:function(e,t){N().post("".concat("http://localhost:5000/api/login"),e).then((function(e){n({type:"LOGIN_SUCCESS"}),localStorage.setItem("token",e.data.payload),t.history.push("/friends")})).catch((function(e){n(b(e.response.data.error))}))},logout:function(){localStorage.clear(),n(b(null))},dispatch:n}};function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){var t=w(),a=t.authState,c=t.login,o=Object(r.useState)({username:"",password:"",password2:""}),m=Object(s.a)(o,2),i=m[0],u=m[1],p=Object(r.useState)({name:"",password:""}),d=Object(s.a)(p,2),f=d[0],b=d[1],E=function(e){u(S({},i,Object(l.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-data"},n.a.createElement("div",{className:"login-header mb-4"},"Sign In"),n.a.createElement("div",{className:"error mb-2"},a.error&&a.error),n.a.createElement("form",{className:"input-form",onSubmit:function(t){t.preventDefault();var a={};i.password!==i.password2&&(a.password="Passwords do not match"),i.username.length<3&&(a.name="Invalid username"),Object.values(a).length>0?(b(a),u(S({},i,{password:"",password2:""}))):(c(i,e),u(S({},i,{password:"",password2:""})))},method:"post"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Email or Username"),n.a.createElement("input",{id:"username",type:"text",name:"username",onChange:E,value:i.username,required:!0,className:"form-control"})),n.a.createElement("div",{className:"error mb-1"},f.name&&f.name),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",name:"password",onChange:E,value:i.password,required:!0,className:"form-control"})),i.password?n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Confirm Password"),n.a.createElement("input",{type:"password",name:"password2",onChange:E,value:i.password2,required:!0,className:"form-control"})):null,n.a.createElement("div",{className:"error mb-1"},f.password&&f.password),n.a.createElement("button",{className:"btn btn-primary"},"Login")))},F=a(7),I=function(){var e=w(),t=e.authState,a=e.logout;return n.a.createElement("header",{className:"header mb-5"},n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light shadow"},n.a.createElement(F.b,{to:"/",className:"navbar-brand"},"React-Auth"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(F.b,{to:"/",className:"nav-link"},"Home")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(F.b,{to:"/friends",className:"nav-link"},"Friends")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(F.b,{to:"/add-friend",className:"nav-link"},"Add Friend")),t.isAuthenticated?n.a.createElement("li",{className:"nav-item"},n.a.createElement("span",{className:"nav-link",onClick:a},"Logout")):n.a.createElement("li",{className:"nav-item"},n.a.createElement(F.b,{to:"/login",className:"nav-link"},"Login"))))))},k=function(e){return n.a.createElement("div",{className:"home-page"},"Home Page")},A=a(15),x=function(e){var t=Object(r.useContext)(g),a=Object(s.a)(t,2),c=a[0],o=(c.friends,c.current,a[1]),l=e.friend,m=l.id,i=l.name,u=l.age,p=l.email;return n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},m),n.a.createElement("td",null,i),n.a.createElement("td",null,u),n.a.createElement("td",null,p),n.a.createElement("td",null,n.a.createElement(A.a,{className:"icon",onClick:function(){return function(e,t){var a="/edit-friend/".concat(e);o({type:"SET_FRIEND",payload:t.friend}),t.history.push(a)}(m,e)}})),n.a.createElement("td",null,n.a.createElement(A.b,{className:"icon",onClick:function(){return function(e){var t="".concat("http://localhost:5000/api/friends/").concat(e);N().delete(t,{params:{id:e}}).then((function(e){o({type:"DELETE_FRIEND",payload:e.data})})).catch((function(e){console.log(e)}))}(m)}})))},R=function(e){var t=Object(r.useContext)(g),a=Object(s.a)(t,2),c=a[0].friends,o=a[1],l=Object(r.useState)(null),m=Object(s.a)(l,2),i=m[0],u=m[1];return Object(r.useEffect)((function(){u(null),N().get("http://localhost:5000/api/friends").then((function(e){o({type:"ADD_FRIEND",payload:e.data})})).catch((function(e){u(e.response.data.error)}))}),[]),n.a.createElement("div",{className:"table-md"},n.a.createElement("div",{className:"error"},i&&i),n.a.createElement("table",{className:"table table-striped table-dark"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Age"),n.a.createElement("th",{scope:"col"},"Email"),n.a.createElement("th",{scope:"col"}),n.a.createElement("th",{scope:"col"}))),n.a.createElement("tbody",null,c.map((function(t){return n.a.createElement(x,Object.assign({friend:t,key:t.id},e))})))))};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var L=function(e){var t=Object(r.useContext)(g),a=Object(s.a)(t,2),c=(a[0],a[1]),o=Object(r.useState)({name:"",age:"",email:""}),m=Object(s.a)(o,2),i=m[0],u=m[1],p=function(e){u(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},i,Object(l.a)({},e.target.name,[e.target.value])))};return n.a.createElement("div",{className:"form-data"},n.a.createElement("div",{className:"login-header mb-4"},"Add Friend"),n.a.createElement("form",{className:"input-form",onSubmit:function(t){t.preventDefault(),i&&N().post("http://localhost:5000/api/friends",i).then((function(t){c(t.data),e.history.push("/friends")}))},method:"post"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Name"),n.a.createElement("input",{id:"username",type:"text",name:"name",onChange:p,value:i.name,required:!0,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Age"),n.a.createElement("input",{type:"number",name:"age",onChange:p,value:i.age,required:!0,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Email"),n.a.createElement("input",{type:"email",name:"email",onChange:p,value:i.email,required:!0,className:"form-control"})),n.a.createElement("button",{className:"btn btn-primary"},"Add Friend")))};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var T=function(e){var t=Object(r.useContext)(g),a=Object(s.a)(t,2),c=a[0],o=(c.friends,c.current),m=a[1],i=Object(r.useState)(o),u=Object(s.a)(i,2),p=u[0],d=u[1],f=e.match.params.id,b=function(e){d(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},p,Object(l.a)({},e.target.name,[e.target.value])))};return n.a.createElement("div",{className:"form-data"},n.a.createElement("div",{className:"login-header mb-4"},"Edit Friend"),n.a.createElement("form",{className:"input-form",onSubmit:function(t){return function(t,a){t.preventDefault();var r="".concat("http://localhost:5000/api/friends/").concat(a);p&&N().put(r,p).then((function(t){m({type:"EDIT_FRIEND",payload:t.data}),e.history.push("/friends")})).catch((function(e){console.log(e)}))}(t,f)},method:"post"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Name"),n.a.createElement("input",{id:"username",type:"text",name:"name",onChange:b,value:p.name,required:!0,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Age"),n.a.createElement("input",{type:"number",name:"age",onChange:b,value:p.age,required:!0,className:"form-control"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:""},"Email"),n.a.createElement("input",{type:"email",name:"email",onChange:b,value:p.email,required:!0,className:"form-control"})),n.a.createElement("button",{className:"btn btn-primary"},"Edit Friend")))},U=a(9),G=a(30),H=function(e){var t=w().authState,a=e.component,r=Object(G.a)(e,["component"]);return n.a.createElement(U.b,Object.assign({},r,{render:function(e){return t.isAuthenticated?n.a.createElement(a,e):n.a.createElement(U.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))},J=function(){return n.a.createElement(j,null,n.a.createElement(y,null,n.a.createElement("div",{className:""},n.a.createElement(I,null),n.a.createElement("section",{className:"main-content container"},n.a.createElement(U.d,null,n.a.createElement(U.b,{exact:!0,path:"/",component:k}),n.a.createElement(H,{path:"/friends",component:R}),n.a.createElement(H,{path:"/add-friend",component:L}),n.a.createElement(H,{path:"/edit-friend/:id",component:T}),n.a.createElement(U.b,{path:"/login",component:C}))))))};o.a.render(n.a.createElement(F.a,null,n.a.createElement(J,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.002b8018.chunk.js.map